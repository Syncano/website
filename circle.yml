machine:
  ruby:
    version: 1.9.3-p448
  node:
    version: 0.12.7

dependencies:
  override:
    - bundle install
    - npm install
    - npm install -g syncano-gatsby

test:
  override:
    - gatsby build

deployment:
#  production:
#    branch: master
#    commands:
#      - "jekyll build --config _config.yml,./config/production/_config.yml"
#      - s3_website push --config-dir=./config/production/
  staging:
    branch: devel
    commands:
      - NODE_ENV=staging gatsby build
      - s3_website push --config-dir=./config/staging/
